# 第6节 MongoDB

MongoDB支撑今天主流Web应用的关键功能：索引、复制、分片、丰富的查询语法，特别灵活的数据模型。与此同时还不牺牲速度。

- 索引

MongoDB支持通用辅助索引，能进行多种快速查询，也提供唯一的、复合的和地理空间索引能力。

- 存储JavaScript

开发人员不必使用存储过程了，可以直接在服务端存取JavaScript的函数和值。

- 聚合

MongoDB支持MapReduce和其他聚合工具。

- 固定集合

集合的大小是有上限的，这对某些类型的数据（比如日志）特别有用。

- 文件存储

MongoDB支持用一种容易使用的协议存储大型文件和文件的元数据。



**有些关系型数据库的常见功能MongoDB并不具备，比如联接（join）和复杂的多行事务。这个架构上的考虑是为了提高扩展性，因为这两个功能实在很难在一个分布式系统上实现。**



MongoDB使用MongoDB传输协议作为与服务器交互的主要方式（与之对应的协议需要更多的开销，如HTTP/REST）。它对文档进行动态填充，预分配数据文件，用空间换取性能的稳定。默认的存储引擎中使用了内存映射文件，将内存管理工作交给操作系统去处理。动态查询优化器会“记住”执行效率最高的方式。总之，MongoDB在各个方面都充分考虑了性能。



要记住一点，数据库名最终会变成文件系统里的文件，这也就是有如此多限制的原因。

有一些数据库名是保留的，可以直接访问这些有特殊作用的数据库。这些数据库如下所示。

- admin

从权限的角度来看，这是”root“数据库。要是将一个用户添加到这个数据库，这个用户自动继承所有数据库的权限。一些特定的服务端命令也只能从这个数据库运行，比如列出所有的数据库或者关闭服务器。

- local

这个数据永远不会被复制，可以用来存储限于本地单台服务器的任意集合

- config

当Mongo用于分片设置时，config数据库在内部使用，用于保存分片的相关信息。